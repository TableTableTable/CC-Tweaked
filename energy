-- rftools_power_reader.lua
-- Reads energy levels from an RFToolsPower Dimensional Cell
-- and prints the results to the computer.

-- Change this to the side the Dimensional Cell (with a modem) is on
local side = "back"

local cell = peripheral.wrap(side)
if not cell then
  print("No Dimensional Cell found on side: " .. side)
  return
end

-- Try to get stored energy and capacity
local stored = 0
local capacity = 0

if cell.getEnergy then
  stored = cell.getEnergy()
elseif cell.getEnergyStored then
  stored = cell.getEnergyStored()
else
  print("Could not find an energy method on the Dimensional Cell.")
  return
end

if cell.getMaxEnergyStored then
  capacity = cell.getMaxEnergyStored()
elseif cell.getEnergyCapacity then
  capacity = cell.getEnergyCapacity()
end

-- Print results
print("=== RFTools Dimensional Cell ===")
print("Energy Stored: " .. stored .. " RF")
if capacity > 0 then
  print("Capacity: " .. capacity .. " RF")
  local percent = math.floor((stored / capacity) * 100)
  print("Usage: " .. percent .. "%")
end
